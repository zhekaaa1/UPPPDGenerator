<Window x:Class="UPPPDGenerator.Windows.FillOutTheDocument"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:UPPPDGenerator.Windows"
        xmlns:cl="clr-namespace:UPPPDGenerator.Windows.Elements"
        mc:Ignorable="d"
        Title="FillOutTheDocument" Height="1000" Width="1920" WindowState="Maximized">
    <Window.Resources>
        <Storyboard x:Key="FadeInAnimation">
            <DoubleAnimation Storyboard.TargetProperty="Opacity"
         From="0" To="1"
         Duration="0:0:0.2"
         BeginTime="0:0:0.2" />
        </Storyboard>
        <Storyboard x:Key="FadeOutAnimation">
            <DoubleAnimation Storyboard.TargetProperty="Opacity"
         To="0"
         Duration="0:0:0.2"
         BeginTime="0:0:0.2" />
        </Storyboard>
    </Window.Resources>
    <Grid>
        <Grid VerticalAlignment="Top" Background="#343434" Height="50">
            <Image Source="/resources/imgs/icon.png" Height="40" Width="40" Margin="10,0,0,0" HorizontalAlignment="Left"/>
            <TextBlock Text="Заполнение документа" FontSize="25" VerticalAlignment="Center" Margin="100,0,0,0" Foreground="White"/>
            <StackPanel HorizontalAlignment="Right" Orientation="Horizontal" VerticalAlignment="Center" Margin="0,0,40,0">
                <StackPanel.Resources>
                    <Style TargetType="Button">
                        <Setter Property="Foreground" Value="White"/>
                        <Setter Property="Height" Value="35"/>
                        <Setter Property="FontSize" Value="18"/>
                        <Setter Property="Width" Value="50"/>
                    </Style>
                </StackPanel.Resources>
            </StackPanel>
        </Grid>
        <Grid Background="#222222" Margin="0,50,0,0">
            <!-- Основная разметка: слева редактор, справа панель ресурсов -->
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="3*"/>
                <!-- Редактор -->
                <ColumnDefinition Width="1*"/>
                <!-- Панель ресурсов -->
            </Grid.ColumnDefinitions>

            <!-- Редактор документа -->
            <StackPanel Grid.Column="0" Margin="20">
                <Button Content="Назад" Click="BackButton_Click"  Name="BackButton" HorizontalAlignment="Left" Padding="10" Background="#595959" Foreground="White" BorderBrush="Red"/>
                <TextBlock Text="Редактор документа" Foreground="White" FontSize="18" Margin="10"/>
                <Grid>
                    <TextBlock HorizontalAlignment="Left" Text="Заполняйте основную часть!" Foreground="LightGray" Margin="10"/>
                    <CheckBox VerticalAlignment="Center" Name="ThemeCheckBox" Checked="ThemeCheckBox_Checked" Unchecked="ThemeCheckBox_Unchecked" HorizontalAlignment="Right" Content="Темная тема" FontSize="16" Foreground="White"/>
                </Grid>
                <ToolBar Background="#343434">
                    <ToggleButton FontSize="16" Foreground="White" Name="BoldButton" Click="ToggleBold_Click">
                        <ToggleButton.Template>
                            <ControlTemplate>
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="ж" FontWeight="Bold" Margin="5"/>
                                    <TextBlock Text="Полужирный" FontSize="14" Foreground="LightGray" VerticalAlignment="Center"/>
                                </StackPanel>
                            </ControlTemplate>
                        </ToggleButton.Template>
                    </ToggleButton>
                    <ToggleButton FontSize="16" Foreground="White" Margin="10,0,0,0" Name="ItalicButton" Click="ToggleItalic_Click">
                        <ToggleButton.Template>
                            <ControlTemplate>
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="к" FontStyle="Italic" Margin="5"/>
                                    <TextBlock Text="Курсив" FontSize="14" Foreground="LightGray" VerticalAlignment="Center"/>
                                </StackPanel>
                            </ControlTemplate>
                        </ToggleButton.Template>
                    </ToggleButton>
                    <ToggleButton FontSize="16" Foreground="White" Name="UnderlineButton" Margin="10,0,0,0" Click="ToggleUnderline_Click">
                        <ToggleButton.Template>
                            <ControlTemplate>
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="ч" TextDecorations="Underline" Margin="5"/>
                                    <TextBlock Text="Подчеркнутый" FontSize="14" Foreground="LightGray" VerticalAlignment="Center"/>
                                </StackPanel>
                            </ControlTemplate>
                        </ToggleButton.Template>
                    </ToggleButton>
                </ToolBar>


                <Grid Height="700">
                    <ScrollViewer Height="600" VerticalScrollBarVisibility="Auto" Margin="20">
                        <StackPanel VerticalAlignment="Top" x:Name="DocumentEditor">
                            <RichTextBox FontFamily="{StaticResource Comfortaa}"
                                         Padding="10" Background="#343434" 
                                         Foreground="White" FontSize="16" 
                                         BorderThickness="0" Name="MainEditor" 
                                         VerticalAlignment="Stretch"/>
                        </StackPanel>
                    </ScrollViewer>
                </Grid>
            </StackPanel>

            <!-- Панель ресурсов -->
            <Border Grid.Column="1" Background="#343434" Margin="20,50,20,50" CornerRadius="10">
                <Grid>
                    <StackPanel>
                        <TextBlock Text="Ресурсы" FontWeight="Bold" Margin="10" Foreground="White" FontSize="16"/>
                        <TextBlock Text="Добавьте в документ изображения и таблицы!" Margin="10" Foreground="LightGray"/>
                    </StackPanel>
                    <ScrollViewer Margin="0,70,0,100" >
                        <StackPanel>
                            <StackPanel>
                                <Button HorizontalAlignment="Center" Padding="5" Background="Transparent" BorderThickness="2" FontSize="14"  Foreground="White"  Content="Добавить ресурс" Click="AddResource_Click">
                                    <Button.Template>
                                        <ControlTemplate>
                                            <Border BorderBrush="#B2009A" BorderThickness="1" CornerRadius="5">
                                                <StackPanel Orientation="Horizontal" Margin="5">
                                                    <Image Height="15" Width="15" Source="/resources/imgs/plus.png"/>
                                                    <TextBlock Text="Добавить ресурс" VerticalAlignment="Center" Margin="10,0,10,0"/>
                                                </StackPanel>
                                            </Border>
                                        </ControlTemplate>
                                    </Button.Template>
                                </Button>
                                <TextBlock Text="Изображения" Foreground="LightGray" FontSize="14" Margin="10"/>
                                <ListBox Margin="10" SelectionChanged="ResourceList_SelectionChanged" Foreground="White" Name="ImageResourceList" BorderBrush="#808080" Height="150" Background="#343434" BorderThickness="1"/>
                                <TextBlock Text="Таблицы" Foreground="LightGray" FontSize="14" Margin="10"/>
                                <ListBox Margin="10" SelectionChanged="ResourceList_SelectionChanged" Foreground="White" Name="TableResourceList" Height="150" Background="#343434" BorderBrush="#808080" BorderThickness="1"/>
                            </StackPanel>
                            <StackPanel Orientation="Vertical" HorizontalAlignment="Center" Margin="10" VerticalAlignment="Bottom">
                                <Button Click="AddImageReference_Click" Margin="0,0,0,10">
                                    <Button.Template>
                                        <ControlTemplate>
                                            <StackPanel Orientation="Horizontal">
                                                <Image Source="/resources/imgs/image.png" VerticalAlignment="Center" Height="20" Width="20"/>
                                                <TextBlock Text="Добавить ссылку на рисунок" Margin="10,0,0,0" VerticalAlignment="Center" Foreground="White"/>
                                            </StackPanel>
                                        </ControlTemplate>
                                    </Button.Template>
                                </Button>
                                <Button Click="AddTableReference_Click" Margin="0,0,0,10">
                                    <Button.Template>
                                        <ControlTemplate>
                                            <StackPanel Orientation="Horizontal">
                                                <Image Source="/resources/imgs/table.png" VerticalAlignment="Center" Height="20" Width="20"/>
                                                <TextBlock Text="Добавить ссылку на таблицу" Margin="10,0,0,0" VerticalAlignment="Center" Foreground="White"/>
                                            </StackPanel>
                                        </ControlTemplate>
                                    </Button.Template>
                                </Button>
                            </StackPanel>
                        
                        </StackPanel>
                    </ScrollViewer>
                    <StackPanel VerticalAlignment="Bottom" Margin="10">
                        <Button Content="Сгенерировать документ" x:Name="Generate_Button" Padding="10" Foreground="White" Background="#B2009A" BorderThickness="0" Margin="10" Click="Generate_Button_Click"/>
                    </StackPanel>
                </Grid>
                
                
            </Border>
        </Grid>
        <!-- контейнер для добавления ресурса -->
        <Grid Margin="0,50,0,0" x:Name="addResourceDialogue" Visibility="Collapsed" Opacity="1">
            <Rectangle Fill="Black" Opacity="0.5"/>
            <Grid MinHeight="400" MaxHeight="1000" VerticalAlignment="Center" HorizontalAlignment="Center" MinWidth="700" MaxWidth="1200" Background="#222222">
                <StackPanel>
                    <StackPanel>
                        <TextBlock Text="Добавить ресурс" HorizontalAlignment="Center" Foreground="White" FontSize="20" Margin="10"/>
                        <TextBlock Text="Выберите тип ресурса:" Foreground="White" FontSize="17" Margin="10"/>
                        <StackPanel Orientation="Vertical" Margin="10">
                            <RadioButton x:Name="ImageRadioButton" Background="#595959" FontSize="15" Margin="5"
                     BorderThickness="0" Checked="ResourceType_Checked" 
                     GroupName="typeOfResource" Content="Изображение" Foreground="White"/>
                            <RadioButton IsEnabled="False" x:Name="TableRadioButton" Background="#595959" FontSize="15" Margin="5"
                     Checked="ResourceType_Checked" GroupName="typeOfResource" 
                     Content="Таблица" Foreground="White"/>
                        </StackPanel>
                        <Button Foreground="White" x:Name="AddImageSourceButton" Background="#595959" BorderBrush="#B2009a" HorizontalAlignment="Left" Padding="10" Content="Открыть изображение..." Margin="10" Click="OpenImage_Click"/>
                    </StackPanel>
                    <!-- Плавно появляется, если кликнули на РБ "Изображение" -->
                    <StackPanel Visibility="Visible" x:Name="ImageOptions">
                        <Image x:Name="PreviewImage" Margin="10" Stretch="Uniform" MaxHeight="400"/>
                        <!-- ПОЯВЛЯЕТСЯ, ЕСЛИ "EnableDescriptions": true -->
                        <StackPanel x:Name="desc_SL" Visibility="Visible">
                            <cl:FieldOnMainScr Padding="5" Margin="10" x:Name="ImageDescription" FieldPlaceholder="Введите описание к картинке"/>
                        </StackPanel>
                    </StackPanel>

                        <!-- Плавно появляется, если кликнули на РБ "Таблица" -->
                    <StackPanel x:Name="TableOptions" Visibility="Collapsed" Opacity="0">
                        <Button>Добавить таблицу</Button>
                    </StackPanel>
                    <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Center" VerticalAlignment="Bottom" Margin="10">
                        <Button Content="Удалить" Margin="5" Padding="7" Foreground="White" Background="Transparent" BorderBrush="red" x:Name="Delete_Button" Click="Delete_Button_Click"/>
                        <Button Content="Отмена" Margin="5" Padding="7" Foreground="White" Background="Transparent" BorderBrush="#a1009a" x:Name="Cancel_Button" Click="Cancel_Button_Click"/>
                        <Button Content="Применить" Margin="5" Padding="7" Foreground="White" Background="Transparent" IsEnabled="False" BorderBrush="#d4009a" x:Name="Add_Button" Click="Add_Button_Click"/>
                        <Button Content="Сохранить" Margin="5" Padding="7" Foreground="White" Background="Transparent" IsEnabled="True" BorderBrush="#d4009a" x:Name="Save_Button" Click="Save_Button_Click"/>
                        <Button Content="Назад" Margin="5" Foreground="Red" x:Name="Back_Button" Visibility="Visible" HorizontalAlignment="Left" Padding="7" Background="Transparent" FontSize="14" BorderBrush="Red" Opacity="1" Click="Back_Button_Click"/>
                    </StackPanel>
                </StackPanel>
            </Grid>
        </Grid>
        <cl:ErrorContainerOnMainScr x:Name="ErrorContainer"
                       HorizontalAlignment="Left"
                       VerticalAlignment="Bottom"
                       Margin="20"/>
    </Grid>
</Window>
